<section class="py-3 bg-color-F2F4F7">
  <div class="new-container1">
    <div class="d-block w-100 mb-2">
      <h3 class="text-black font-weight-600 text-20 m-0 p-0">   {{'RETURNDETAIL'|translate}} </h3>
    </div>
    <div class="row">
        <div class="col-md-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-transparent p-0 m-0 border-0">
                    <li class="breadcrumb-item breadcrumb-slash-off">
                        <button routerLink="../home" class="text-14 p-0 font-weight-400 cursor-pointer text-black">
                          {{'HOME'|translate}}
                          </button>
                        <span class="d-inline-block text-grey text-16 px-2"> / </span>
                    </li>
                    <li class="breadcrumb-item breadcrumb-slash-off">
                      <button routerLink="../my-order" class="text-14 p-0 font-weight-400 cursor-pointer text-black">
                        {{'ORDERS'|translate}}
                        </button>
                      <span class="d-inline-block text-grey text-16 px-2"> / </span>
                  </li>
                    <li class="breadcrumb-item breadcrumb-slash-off" aria-current="page">
                        <b class="text-14 font-weight-400 cursor-default text-black">
                          {{'RETURNDETAIL'|translate}}
                        </b>
                    </li>
                </ol>
            </nav>
        </div>
    </div>
  </div>
</section>
<section class="py-5">
<div class="new-container1">

    <div class="d-block w-100 mb-5 overflow-hidden">
        <div class="d-flex align-items-center justify-content-between w-100 mb-4 pb-2">
            <div class="d-inline-block">
                <h4 class="font-weight-700 text-22 m-0 text-black d-flex align-items-center justify-content-start w-100">
                    {{'REQUEST_STATUS'|translate}}:
                    <span class="font-weight-600 text-18 d-inline-block ps-3">
                     {{'YOUR_REQUEST_IS'|translate}} {{order.returnOrderStatus |translate}}
                    </span>
               </h4>
            </div>
            <div class="d-inline-block">
                <button (click)="openLinkInNewTab()" class="px-3 py-2 bg-theme-dark-color text-white rounded-3 text-14 font-weight-500">
                   {{'PRINT_RETURN_SLIP'|translate}}
                </button>
            </div>

        </div>
        <div class="d-flex w-100 align-items-center justify-content-between mob-overflow-auto tab-overflow-auto modern-scroll py-2">
            <div class="d-inline-block position-relative status-success-flow-box px-1 w-100">
                <span class="status-line-1 start-0"></span>
                <div class="d-block w-100 text-center">
                <span class="bg-white d-inline-block position-relative mb-2">
                    <i class="bi bi-check-circle-fill succ text-success text-18"></i>
                    <i class="bi bi-circle-fill denn text-black text-18"></i>
                </span>
                </div>
                <div class="d-flex justify-content-center align-items-center w-100 text-center">
                <button class="bg-grey2 stat-action-btn cursor-default rounded-3 overflow-hidden text-13 rounded-1 font-weight-500 d-flex align-items-center justify-content-start">
                <span class="d-inline-block px-2">    {{'RETURN_INITIATED'|translate}}  </span>
                    <i class="bi bi-arrow-right stat-action-btn-arrow double-arrow-status-btn lh-tiny bg-success text-white px-1 py-1 text-14"></i>
                </button>
                </div>
            </div>
            <!-- Cancelled Status Starts Here -->
            <div *ngIf="order.customerCancelledReturn" class="d-inline-block position-relative status-success-flow-box px-1 w-100">

                <div class="d-block w-100 text-center">
                <span class="bg-white d-inline-block position-relative mb-2">
                    <i class="bi bi-check-circle-fill succ text-success text-18"></i>
                    <i class="bi bi-circle-fill denn text-black text-18"></i>
                </span>
                </div>
                <div class="d-flex justify-content-center align-items-center w-100 text-center">
                <button class="bg-grey2 stat-action-btn cursor-default  rounded-1 text-13 rounded-2 font-weight-500 d-flex align-items-center justify-content-start">
                    <span class="d-inline-block px-2 min-width-clear text-capitalize">     {{'CANCEL_ORDER'|translate}} </span>
                    </button>
                </div>
            </div>
            <!-- Cancelled Status Ends Here -->
            <div class="d-inline-block position-relative status-success-flow-box px-1 w-100" *ngIf="returnOrderTracks.includes('REQUEST_RETURN_APPROVED') && !order.customerCancelledReturn" >
            <span class="status-line-1 start-0"></span>
                <div class="d-block w-100 text-center">
                <span class="bg-white d-inline-block position-relative mb-2">
                    <i class="bi bi-check-circle-fill succ text-success text-18"></i>
                    <i class="bi bi-circle-fill denn text-black text-18"></i>
                </span>
                </div>
                <div class="d-flex justify-content-center align-items-center w-100 text-center">
                <button class="bg-grey2 stat-action-btn cursor-default rounded-1 text-13 rounded-2 font-weight-500 d-flex align-items-center justify-content-start">
                    <span class="d-inline-block px-2 min-width-clear">     {{'RETURN_ACCEPTED'|translate}}  </span>
                    <i class="bi bi-arrow-right stat-action-btn-arrow double-arrow-status-btn lh-tiny bg-success text-white px-1 py-1 text-14"></i>
                    </button>
                </div>
            </div>
            <div class="d-inline-block position-relative status-success-flow-box px-1 w-100"  *ngIf="returnOrderTracks.includes('RETURN_ARRIVED_VALIDATED') && !order.customerCancelledReturn">
                <span class="status-line-1 start-0"></span>
                    <div class="d-block w-100 text-center">
                    <span class="bg-white d-inline-block position-relative mb-2">
                        <i class="bi bi-check-circle-fill succ text-success text-18"></i>
                        <i class="bi bi-circle-fill denn text-black text-18"></i>
                    </span>
                    </div>
                    <div class="d-flex justify-content-center align-items-center w-100 text-center">
                    <button class="bg-grey2 stat-action-btn cursor-default  rounded-1 text-13 rounded-2 font-weight-500 d-flex align-items-center justify-content-start">
                        <span class="d-inline-block px-2 min-width-clear">    {{'RETURN_ARRIVED'|translate}}  </span>
                        <i class="bi bi-arrow-right stat-action-btn-arrow double-arrow-status-btn lh-tiny bg-success text-white px-1 py-1 text-14"></i>
                        </button>
                    </div>
            </div>
            <div class="d-inline-block position-relative status-success-flow-box px-1 w-100" *ngIf="returnOrderTracks.includes('INSPECTION_VALIDATED') && !order.customerCancelledReturn" >
                    <span class="status-line-1 start-0"></span>
                        <div class="d-block w-100 text-center">
                        <span class="bg-white d-inline-block position-relative mb-2">
                            <i class="bi bi-check-circle-fill succ text-success text-18"></i>
                            <i class="bi bi-circle-fill denn text-black text-18"></i>
                        </span>
                        </div>
                        <div class="d-flex justify-content-center align-items-center w-100 text-center">
                        <button class="bg-grey2 stat-action-btn cursor-default  rounded-1 text-13 rounded-2 font-weight-500 d-flex align-items-center justify-content-start">
                            <span class="d-inline-block px-2 min-width-clear">   {{'IN_INSPECTION'|translate}}  </span>
                            <i class="bi bi-arrow-right stat-action-btn-arrow double-arrow-status-btn lh-tiny bg-success text-white px-1 py-1 text-14"></i>
                            </button>
                        </div>
            </div>
            <div class="d-inline-block position-relative status-success-flow-box px-1 w-100"  *ngIf="returnOrderTracks.includes('REFUNDED') && !order.customerCancelledReturn">

                        <div class="d-block w-100 text-center">
                        <span class="bg-white d-inline-block position-relative mb-2">
                            <i class="bi bi-check-circle-fill succ text-success text-18"></i>
                            <i class="bi bi-circle-fill denn text-black text-18"></i>
                        </span>
                        </div>
                        <div class="d-flex justify-content-center align-items-center w-100 text-center">
                        <button class="bg-grey2 stat-action-btn cursor-default  rounded-1 text-13 rounded-2 font-weight-500 d-flex align-items-center justify-content-start">
                            <span class="d-inline-block px-2 min-width-clear text-capitalize">     {{'REFUNDED'|translate}} </span>
                            </button>
                        </div>
            </div>
        </div>
        <div class="d-block w-100"  *ngIf="returnOrderTracks.includes('REFUNDED')">
            <p class="d-block w-100 text-center font-weight-500 text-14">
                  {{'NOTE_REFUND_WILL_TAKE_BUSINESS_DAYS_CONTACT US'|translate}}
            </p>
        </div>
    </div>

    <!-- Return Order Details Starts Here -->
    <div class="d-block w-100 mb-5">
        <div class="d-block w-100 mb-4 pb-2">
            <h4 class="font-weight-700 text-22 m-0 text-black">    {{'RETURN_REQUEST_DETAILS'|translate}}   </h4>
        </div>
        <div class="d-block w-100">
            <table class="w-100">
                <thead>
                    <tr>
                        <th class="px-2 py-3 bg-grey2 border border-color-silver">
                          <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                 {{'RETURN_ID'|translate}}
                            </span>
                        </th>
                        <th class="px-2 py-3 bg-grey2 border border-color-silver">
                            <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                 {{'ITEMS_INCLUDED_IN_RETURN'|translate}}
                            </span>
                        </th>
                        <th class="px-2 py-3 bg-grey2 border border-color-silver">
                            <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                 {{'PREFERRED_RESOLUTION'|translate}}
                            </span>
                        </th>
                        <th class="px-2 py-3 bg-grey2 border border-color-silver">
                            <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                {{'DELIVERY_OPTIONS'|translate}}
                            </span>
                        </th>
                        <th *ngIf="order.returnLabelUrl !== null" class="px-2 py-3 bg-grey2 border border-color-silver text-center">
                            <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                               {{'RETURN_LABEL'|translate}}
                            </span>
                        </th>
                        <th class="px-2 py-3 bg-grey2 border border-color-silver text-center">
                            <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                               {{'RETURN_STATUS'|translate}}
                            </span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="px-2 py-3 border">
                          <span class="text-15 font-weight-400 d-inline-block">  {{order?.returnOrderId}}  </span>
                        </td>
                        <td class="px-2 py-3 border">
                            <span class="text-15 font-weight-400 d-inline-block">  {{order?.orderDetails?.length}} </span>
                        </td>
                        <td class="px-2 py-3 border">
                            <span class="text-15 font-weight-400 d-inline-block">  {{order.returnResolutionType |translate}}  </span>
                        </td>
                        <td class="px-2 py-3 border">
                            <span class="text-15 font-weight-400 d-inline-block"> {{order.returnDeliveryType |translate}}  </span>
                          </td>
                          <td *ngIf="order.returnLabelUrl !== null" class="px-2 py-3 border text-center">
                           <a  (click)="viewAndDownloadFile()" class="bg-0BA5EC cursor-pointer px-3 py-1 text-white rounded-2 text-14 font-weight-500">
                            {{ 'VIEW_AND_DOWNLOAD' | translate }}
                          </a>
                          </td>
                          <td class="px-2 py-3 border text-center">
                            <span class="text-14 font-weight-400 d-inline-block bg-info text-white px-3 py-2 rounded-pill">
                                 {{order.returnOrderStatus |translate}}
                            </span>
                          </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!-- Return Order Details Ends Here -->

    <!-- Items Returned Details Starts Here -->
    <div class="d-block w-100 mb-5">
        <div class="d-block w-100 mb-4 pb-2">
            <h4 class="font-weight-700 text-22 m-0 text-black">   {{'ITEM_REQUESTED_TO_RETURN'|translate}}  </h4>
        </div>
        <div class="d-block w-100">

            <!-- Single Item Starts Here -->
            <div class="d-block w-100">
                <table class="w-100">
                    <thead>
                        <tr>
                            <th class="px-2 py-3 bg-grey2 border border-color-silver tab-wid-4">
                              <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                    {{'S_NO'|translate}}
                                </span>
                            </th>
                            <th class="px-2 py-3 bg-grey2 border border-color-silver tab-wid-28">
                                <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                    {{'PRODUCT_DETAIL'|translate}}
                                </span>
                            </th>
                            <th class="px-2 py-3 bg-grey2 border border-color-silver text-center tab-wid-9">
                                <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                   {{'PRICE'|translate}}
                                </span>
                            </th>
                            <th class="px-2 py-3 bg-grey2 border border-color-silver text-center tab-wid-13">
                                <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                   {{'QUANTITY_PURCHASED'|translate}}
                                </span>
                            </th>
                            <th class="px-2 py-3 bg-grey2 border border-color-silver tab-wid-45 d-lg-table-cell d-md-table-cell d-sm-none d-none">
                                <span class="font-weight-600 text-15 mob-text-14 d-inline-block text-black">
                                   {{'RETURNDETAIL'|translate}}
                                </span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let prod of order?.orderDetails" >
                            <td class="px-2 py-3 border tab-wid-4">
                              <span class="text-15 font-weight-400 d-inline-block">  {{prod.id}}  </span>
                            </td>  
                            <td class="px-2 py-3 border tab-wid-28">
                                <div class="d-flex flex-lg-row flex-md-row flex-sm-row flex-column align-items-center justify-content-start">
                                <div class="d-inline-block">
                                    <img class="w-100-px h-100-px rounded-2 object-fit-cover" src="{{prod?.product?.mainImageUrl}}"
                                    onerror="this.src='./assets/img/default-product.png'">
                                </div>
                                <div class="d-inline-block ps-lg-3 ps-md-3 ps-sm-3 ps-0 pt-lg-0 pt-md-0 pt-sm-0 pt-3">
                                    <h5 class="text-black font-weight-600 text-15 mb-2 mt-0">
                                      {{prod?.product?.productName | titlecase}}
                                    </h5>
                                    <h5 *ngIf="prod?.product?.brandName && prod?.product?.brandName !== null" class="mb-1 mt-0 w-100 d-flex flex-wrap align-items-center justify-content-start">
                                      <span class="d-inline-block text-black font-weight-500 text-15 me-2">  {{'BRAND'|translate}}:  </span>
                                      <span class="d-inline-block text-black font-weight-400 text-15"> {{prod?.product?.brandName}}  </span>
                                    </h5>
                                </div>
                                </div>
                            </td>
                            <td class="px-2 py-3 border text-center tab-wid-9">
                                <span class="text-15 text-black font-weight-600 d-block w-100 text-center">
                                     {{currency}}  {{prod?.price}}
                                </span>
                            </td>
                            <td class="px-2 py-3 border text-center tab-wid-13">
                                <span class="text-15 text-black font-weight-600 d-block w-100 text-center">
                                     {{prod?.quantity}}
                                </span>
                            </td>
                            <td class="px-2 py-3 border tab-wid-45 d-lg-table-cell d-md-table-cell d-sm-none d-none">
                                <app-return-reasons-box [prod]="prod" [orderId]="order.id" [order]="order" (updatedOrder)="onOrderUpdated($event)"></app-return-reasons-box>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="d-lg-none d-md-none d-sm-block d-block border border-color-silver ">
                <div class="d-block w-100 px-2 py-3 bg-grey2">
                  <h5 class="font-weight-600 text-15 mob-text-14 d-inline-block text-black m-0">  {{'RETURNDETAIL'|translate}}  </h5>
                </div>
                <div class="d-block w-100 px-2 py-2">
                    <app-return-reasons-box></app-return-reasons-box>
                </div>
                </div>
            </div>
            <!-- Single Item Ends Here -->

        </div>
    </div>
    <!-- Items Returned Details Ends Here -->

    <!-- Return Order Summary Starts Here -->
    <div class="d-block w-100 mb-5">
        <div class="d-block w-100 mb-4 pb-2">
            <h4 class="font-weight-700 text-22 m-0 text-black">   {{'REFUND_SUMMARY'|translate}}  </h4>
        </div>
        <div class="d-block w-100">
            <div class="row">
                <div class="col-lg-5 col-md-5 col-sm-8 col-12">
                    <div class="d-block w-100 mb-4">
                        <table class="w-100">
                          <tbody>
                            <tr>
                              <td class="px-3 py-2 border   text-black text-15 font-weight-500"> {{'REFUND_SUBTOTAL_FOR'|translate}}  {{order.orderDetails.length}}  {{'ITEMS'|translate}}  </td>
                              <td class="px-3 py-2 border text-black text-15 font-weight-500">
                                <span class="d-inline-block min-width-clear text-black text-15 font-weight-600">  {{currency}} {{refundSubTotal.toFixed(2)}}</span>
                              </td>
                            </tr>
                            <tr>
                              <td class="px-3 py-3 border   text-black text-15 font-weight-500"> {{'TOTAL_TAX_REFUND'|translate}}  (+)</td>
                              <td class="px-3 py-3 border text-black text-15 font-weight-500">
                                <span class="d-inline-block min-width-clear text-black text-15 font-weight-600">   {{currency}} {{taxRefund.toFixed(2)}}  </span>
                              </td>
                            </tr>
                            <tr>
                              <td class="px-3 py-2 border   text-black text-15 font-weight-500"> {{'SHIPPING_AND_HANDLING_REFUND'|translate}}  (+)</td>
                              <td class="px-3 py-2 border text-black text-15 font-weight-500">
                                <span class="d-inline-block min-width-clear text-black text-15 font-weight-600"> {{currency}} {{shippingAndHandling.toFixed(2)}} </span>
                              </td>
                            </tr>
                            <tr>
                              <td class="px-3 py-2 border text-black text-15 font-weight-500"> {{'RESTOCKING_FEE'|translate}}  (-)</td>
                              <td class="px-3 py-2 border text-black text-15 font-weight-500">
                                <span class="d-inline-block min-width-clear text-black text-15 font-weight-600">   {{currency}} {{restockingFee.toFixed(2)}} </span>
                              </td>
                            </tr>
                            <tr>
                              <td class="px-3 py-3 border border-color-silver bg-grey2 text-black text-15 font-weight-600">   {{'TOTAL_ESTIMATED_REFUND'|translate}} </td>
                              <td class="px-3 py-3 border border-color-silver bg-grey2">
                                <span class="d-inline-block min-width-clear text-black text-15 font-weight-600">     {{currency}} {{totalEstimatedRefund.toFixed(2)}}  </span>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Return Order Summary Ends Here -->

</div>
</section>
